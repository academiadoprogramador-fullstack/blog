"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7790],{6579:(r,a,o)=>{o.r(a),o.d(a,{assets:()=>s,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>e,toc:()=>l});const e=JSON.parse('{"id":"Cronograma das Aulas/Semana 11/Aula 55/Controlador de Chamados","title":"Controlador de Chamados","description":"Introdu\xe7\xe3o","source":"@site/docs/Cronograma das Aulas/Semana 11/Aula 55/03. Controlador de Chamados.mdx","sourceDirName":"Cronograma das Aulas/Semana 11/Aula 55","slug":"/Cronograma das Aulas/Semana 11/Aula 55/Controlador de Chamados","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 55/Controlador de Chamados","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"M\xe9todos de Extens\xe3o de Chamados","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 55/M\xe9todos de Extens\xe3o de Chamados"}}');var n=o(4848),t=o(8453);const i={},d=void 0,s={},l=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Actions e Views",id:"actions-e-views",level:2},{value:"01. Cadastro de Chamado",id:"01-cadastro-de-chamado",level:3},{value:"02. Edi\xe7\xe3o de Chamado",id:"02-edi\xe7\xe3o-de-chamado",level:3},{value:"03. Exclus\xe3o de Chamado",id:"03-exclus\xe3o-de-chamado",level:3},{value:"04. Visualiza\xe7\xe3o de Chamados",id:"04-visualiza\xe7\xe3o-de-chamados",level:3}];function c(r){const a={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,n.jsxs)(a.p,{children:["O ",(0,n.jsx)(a.code,{children:"ControladorChamado"})," ser\xe1 respons\xe1vel pelo gerenciamento de opera\xe7\xf5es CRUD de seu respectivo dom\xednio."]}),"\n",(0,n.jsxs)(a.table,{children:[(0,n.jsx)(a.thead,{children:(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.th,{children:"M\xe9todo"}),(0,n.jsx)(a.th,{children:"Verbo HTTP"}),(0,n.jsx)(a.th,{children:"Fun\xe7\xe3o"})]})}),(0,n.jsxs)(a.tbody,{children:[(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:"Cadastrar"}),(0,n.jsx)(a.td,{children:"GET"}),(0,n.jsx)(a.td,{children:"Exibe formul\xe1rio de cadastro de Chamado"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:"CadastrarChamado"}),(0,n.jsx)(a.td,{children:"POST"}),(0,n.jsx)(a.td,{children:"Processa o cadastro de novo Chamado"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:"Editar"}),(0,n.jsx)(a.td,{children:"GET"}),(0,n.jsx)(a.td,{children:"Exibe formul\xe1rio de edi\xe7\xe3o de Chamado"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:"Editar"}),(0,n.jsx)(a.td,{children:"POST"}),(0,n.jsx)(a.td,{children:"Processa a edi\xe7\xe3o de Chamado existente"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:"Excluir"}),(0,n.jsx)(a.td,{children:"GET"}),(0,n.jsx)(a.td,{children:"Exibe tela de confirma\xe7\xe3o de exclus\xe3o de Chamado"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:"ExcluirConfirmado"}),(0,n.jsx)(a.td,{children:"POST"}),(0,n.jsx)(a.td,{children:"Exclui o Chamado selecionado"})]}),(0,n.jsxs)(a.tr,{children:[(0,n.jsx)(a.td,{children:"VisualizarChamados"}),(0,n.jsx)(a.td,{children:"GET"}),(0,n.jsx)(a.td,{children:"Lista todos os Chamados"})]})]})]}),"\n",(0,n.jsx)(a.h2,{id:"actions-e-views",children:"Actions e Views"}),"\n",(0,n.jsx)(a.h3,{id:"01-cadastro-de-chamado",children:"01. Cadastro de Chamado"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-cs",metastring:'title="Controllers/ControladorChamado.cs"',children:'[Route("chamados")]\r\npublic class ControladorChamado : Controller\r\n{\r\n    private ContextoDados contextoDados;\r\n    private IRepositorioChamado repositorioChamado;\r\n    private IRepositorioEquipamento repositorioEquipamento;\r\n\r\n    [HttpGet("cadastrar")]\r\n    public IActionResult Cadastrar()\r\n    {\r\n        var equipamentos = repositorioEquipamento.SelecionarRegistros();\r\n\r\n        var cadastrarVM = new CadastrarChamadoViewModel(equipamentos);\r\n\r\n        return View(cadastrarVM);\r\n    }\r\n\r\n    [HttpPost("cadastrar")]\r\n    public IActionResult Cadastrar(CadastrarChamadoViewModel cadastrarVM)\r\n    {\r\n        var equipamentos = repositorioEquipamento.SelecionarRegistros();\r\n\r\n        var chamado = cadastrarVM.ParaEntidade(equipamentos);\r\n\r\n        repositorioChamado.CadastrarRegistro(chamado);\r\n\r\n        var notificacaoVM = new NotificacaoViewModel(\r\n            "Chamado Cadastrado!",\r\n            $"O registro \\"{chamado.Titulo}\\" foi cadastrado com sucesso!"\r\n        );\r\n\r\n        return View("Notificacao", notificacaoVM);\r\n    }\r\n}\n'})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-html",metastring:'title="Views/ControladorChamado/Cadastrar.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models; @model CadastrarChamadoViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset="utf-8" />\r\n    <title>Cadastro de Chamado - Gest\xe3o de Equipamentos</title>\r\n  </head>\r\n\r\n  <body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/chamados/visualizar">Visualizar Chamados</a>\r\n\r\n    <hr />\r\n\r\n    <h3>Cadastro de Chamado</h3>\r\n\r\n    <form action="/chamados/cadastrar" method="post">\r\n      <label for="Titulo">T\xedtulo do Chamado:</label>\r\n      <br />\r\n      <input type="text" name="Titulo" id="Titulo" />\r\n\r\n      <br />\r\n\r\n      <label for="Descricao">Descri\xe7\xe3o do Chamado:</label>\r\n      <br />\r\n      <textarea name="Descricao" id="Descricao"></textarea>\r\n\r\n      <br />\r\n\r\n      <label for="EquipamentoId">Equipamento do Chamado:</label>\r\n      <br />\r\n      <select name="EquipamentoId" id="EquipamentoId">\r\n        @foreach (var equipamento in Model.EquipamentosDisponiveis) {\r\n        <option value="@equipamento.Id">@equipamento.Nome</option>\r\n        }\r\n      </select>\r\n\r\n      <hr />\r\n\r\n      <button type="submit">Gravar</button>\r\n    </form>\r\n  </body>\r\n</html>\n'})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h3,{id:"02-edi\xe7\xe3o-de-chamado",children:"02. Edi\xe7\xe3o de Chamado"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-cs",metastring:'title="Controllers/ControladorChamado.cs"',children:'[Route("chamados")]\r\npublic class ControladorChamado : Controller\r\n{\r\n    private ContextoDados contextoDados;\r\n    private IRepositorioChamado repositorioChamado;\r\n    private IRepositorioEquipamento repositorioEquipamento;\r\n\r\n    [HttpGet("editar/{id:int}")]\r\n    public IActionResult Editar([FromRoute] int id)\r\n    {\r\n        var chamadoSelecionado = repositorioChamado.SelecionarRegistroPorId(id);\r\n\r\n        var equipamentos = repositorioEquipamento.SelecionarRegistros();\r\n\r\n        var editarVM = new EditarChamadoViewModel(\r\n            id,\r\n            chamadoSelecionado.Titulo,\r\n            chamadoSelecionado.Descricao,\r\n            chamadoSelecionado.Equipamento.Id,\r\n            equipamentos\r\n        );\r\n\r\n        return View(editarVM);\r\n    }\r\n\r\n    [HttpPost("editar/{id:int}")]\r\n    public IActionResult Editar([FromRoute] int id, EditarChamadoViewModel editarVM)\r\n    {\r\n        var equipamentos = repositorioEquipamento.SelecionarRegistros();\r\n\r\n        var chamadoEditado = editarVM.ParaEntidade(equipamentos);\r\n\r\n        var chamadoOriginal = repositorioChamado.SelecionarRegistroPorId(id);\r\n\r\n        if (chamadoEditado.Equipamento != chamadoOriginal.Equipamento)\r\n        {\r\n            chamadoOriginal.Equipamento.RemoverChamado(chamadoOriginal);\r\n\r\n            chamadoOriginal.Equipamento = chamadoEditado.Equipamento;\r\n        }\r\n\r\n        repositorioChamado.EditarRegistro(id, chamadoEditado);\r\n\r\n        var notificacaoVM = new NotificacaoViewModel(\r\n            "Chamado Editado!",\r\n            $"O registro \\"{chamadoEditado.Titulo}\\" foi editado com sucesso!"\r\n        );\r\n\r\n        return View("Notificacao", notificacaoVM);\r\n    }\r\n}\n'})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-html",metastring:'title="Views/ControladorChamado/Editar.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models;\r\n\r\n@model EditarChamadoViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset="utf-8" />\r\n    <title>Edi\xe7\xe3o de Chamado - Gest\xe3o de Equipamentos</title>\r\n</head>\r\n\r\n<body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/chamados/visualizar">Visualizar Chamados</a>\r\n\r\n    <hr />\r\n\r\n    <h3>Edi\xe7\xe3o de Chamado</h3>\r\n\r\n    <form action="/chamados/editar/@Model.Id" method="post">\r\n\r\n        <label for="Titulo">T\xedtulo do Chamado:</label>\r\n        <br />\r\n        <input type="text" name="Titulo" id="Titulo" value="@Model.Titulo"/>\r\n\r\n        <br />\r\n\r\n        <label for="Descricao">Descri\xe7\xe3o do Chamado:</label>\r\n        <br />\r\n        <textarea name="Descricao" id="Descricao">@Model.Descricao</textarea>\r\n\r\n        <br />\r\n\r\n        <label for="EquipamentoId">Equipamento do Chamado:</label>\r\n        <br />\r\n        <select name="EquipamentoId" id="EquipamentoId">\r\n            @foreach (var equipamento in Model.EquipamentosDisponiveis)\r\n            {\r\n                <option value="@equipamento.Id" @(equipamento.Id == Model.EquipamentoId ? "selected" : "")>@equipamento.Nome</option>\r\n            }\r\n        </select>\r\n\r\n        <hr />\r\n\r\n        <button type="submit">Gravar</button>\r\n    </form>\r\n</body>\r\n</html>\n'})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h3,{id:"03-exclus\xe3o-de-chamado",children:"03. Exclus\xe3o de Chamado"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-cs",metastring:'title="Controllers/ControladorChamado.cs"',children:'[Route("chamados")]\r\npublic class ControladorChamado : Controller\r\n{\r\n    private ContextoDados contextoDados;\r\n    private IRepositorioChamado repositorioChamado;\r\n    private IRepositorioEquipamento repositorioEquipamento;\r\n\r\n    [HttpGet("excluir/{id:int}")]\r\n    public IActionResult Excluir([FromRoute] int id)\r\n    {\r\n        var chamadoSelecionado = repositorioChamado.SelecionarRegistroPorId(id);\r\n\r\n        var excluirVM = new ExcluirChamadoViewModel(id, chamadoSelecionado.Titulo);\r\n\r\n        return View(excluirVM);\r\n    }\r\n\r\n    [HttpPost("excluir/{id:int}")]\r\n    public IActionResult ExcluirConfirmado([FromRoute] int id)\r\n    {\r\n        repositorioChamado.ExcluirRegistro(id);\r\n\r\n        var notificacaoVM = new NotificacaoViewModel(\r\n            "Chamado Exclu\xeddo!",\r\n            "O registro foi exclu\xeddo com sucesso!"\r\n        );\r\n\r\n        return View("Notificacao", notificacaoVM);\r\n    }\r\n}\n'})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-html",metastring:'title="Views/ControladorChamado/Excluir.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models\r\n\r\n@model ExcluirChamadoViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset="utf-8" />\r\n    <title>Exclus\xe3o de Chamado - Gest\xe3o de Equipamentos</title>\r\n</head>\r\n\r\n<body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/chamados/cadastrar">Cadastrar Novo Chamado</a> /\r\n    <a href="/chamados/visualizar">Visualizar Chamados</a>\r\n\r\n    <hr />\r\n\r\n    <h3>Exclus\xe3o de Chamado</h3>\r\n\r\n    <p>Voc\xea tem certeza que deseja excluir o registro "@Model.Titulo"?</p>\r\n\r\n    <form action="/chamados/excluir/@Model.Id" method="post">\r\n        <button type="submit">Confirmar</button>\r\n        <a href="/chamados/visualizar">Voltar</a>\r\n    </form>\r\n</body>\r\n</html>\n'})}),"\n",(0,n.jsx)(a.hr,{}),"\n",(0,n.jsx)(a.h3,{id:"04-visualiza\xe7\xe3o-de-chamados",children:"04. Visualiza\xe7\xe3o de Chamados"}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-cs",metastring:'title="Controllers/ControladorChamado.cs"',children:'[Route("chamados")]\r\npublic class ControladorChamado : Controller\r\n{\r\n    private ContextoDados contextoDados;\r\n    private IRepositorioChamado repositorioChamado;\r\n    private IRepositorioEquipamento repositorioEquipamento;\r\n\r\n    [HttpGet("visualizar")]\r\n    public IActionResult Visualizar()\r\n    {\r\n        var chamados = repositorioChamado.SelecionarRegistros();\r\n\r\n        var visualizarVM = new VisualizarChamadosViewModel(chamados);\r\n\r\n        return View(visualizarVM);\r\n    }\r\n}\n'})}),"\n",(0,n.jsx)(a.pre,{children:(0,n.jsx)(a.code,{className:"language-html",metastring:'title="Views/ControladorChamado/Visualizar.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models; @model\r\nVisualizarChamadosViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset="utf-8" />\r\n    <title>Visualiza\xe7\xe3o de Chamados - Gest\xe3o de Equipamentos</title>\r\n  </head>\r\n\r\n  <body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/chamados/cadastrar">Cadastrar Novo Chamado</a> /\r\n\r\n    <hr />\r\n\r\n    <h3>Visualiza\xe7\xe3o de Chamados</h3>\r\n\r\n    <ul>\r\n      @foreach (var e in Model.Registros) {\r\n      <li>\r\n        @e.ToString() / <a href="/chamados/editar/@e.Id">Editar</a> /\r\n        <a href="/chamados/excluir/@e.Id">Excluir</a>\r\n      </li>\r\n      }\r\n    </ul>\r\n  </body>\r\n</html>\n'})})]})}function h(r={}){const{wrapper:a}={...(0,t.R)(),...r.components};return a?(0,n.jsx)(a,{...r,children:(0,n.jsx)(c,{...r})}):c(r)}},8453:(r,a,o)=>{o.d(a,{R:()=>i,x:()=>d});var e=o(6540);const n={},t=e.createContext(n);function i(r){const a=e.useContext(t);return e.useMemo((function(){return"function"==typeof r?r(a):{...a,...r}}),[a,r])}function d(r){let a;return a=r.disableParentContext?"function"==typeof r.components?r.components(n):r.components||n:i(r.components),e.createElement(t.Provider,{value:a},r.children)}}}]);