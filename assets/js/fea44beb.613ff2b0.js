"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2884],{873:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>t,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"Cronograma das Aulas/Semana 11/Aula 51/Views do ASP.NET MVC","title":"Views do ASP.NET MVC","description":"Introdu\xe7\xe3o","source":"@site/docs/Cronograma das Aulas/Semana 11/Aula 51/02. Views do ASP.NET MVC.mdx","sourceDirName":"Cronograma das Aulas/Semana 11/Aula 51","slug":"/Cronograma das Aulas/Semana 11/Aula 51/Views do ASP.NET MVC","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 51/Views do ASP.NET MVC","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Controllers do ASP.NET MVC","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 51/Controllers do ASP.NET MVC"},"next":{"title":"ViewModels do ASP.NET MVC","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 52/ViewModels do ASP.NET MVC"}}');var i=n(4848),r=n(8453);const t={},s=void 0,c={},d=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Situa\xe7\xe3o atual do <code>ControladorFabricante</code>",id:"situa\xe7\xe3o-atual-do-controladorfabricante",level:2},{value:"Utilizando Views do ASP.NET MVC",id:"utilizando-views-do-aspnet-mvc",level:2},{value:"Pasta Compartilhada (Shared)",id:"pasta-compartilhada-shared",level:3},{value:"Refatora\xe7\xe3o do Controller com Views",id:"refatora\xe7\xe3o-do-controller-com-views",level:3},{value:"Passagem de dados din\xe2micos com ViewBag",id:"passagem-de-dados-din\xe2micos-com-viewbag",level:4},{value:"Cadastrar Fabricante",id:"cadastrar-fabricante",level:4},{value:"Editar Fabricante",id:"editar-fabricante",level:4},{value:"Excluir Fabricante",id:"excluir-fabricante",level:4},{value:"Visualizar Fabricantes",id:"visualizar-fabricantes",level:4},{value:"Notifica\xe7\xe3o",id:"notifica\xe7\xe3o",level:4}];function l(e){const a={code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.strong,{children:"Views"})," s\xe3o arquivos ",(0,i.jsx)(a.code,{children:".cshtml"})," (Razor) que servem para ",(0,i.jsx)(a.strong,{children:"renderizar HTML de forma din\xe2mica, desacoplada do controller"}),"."]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Ao usar Views, separamos:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["A ",(0,i.jsx)(a.strong,{children:"l\xf3gica"})," (Controller)."]}),"\n",(0,i.jsxs)(a.li,{children:["A ",(0,i.jsx)(a.strong,{children:"apresenta\xe7\xe3o"})," (View)."]}),"\n",(0,i.jsxs)(a.li,{children:["O ",(0,i.jsx)(a.strong,{children:"modelo de dados"})," (Model)."]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Essa separa\xe7\xe3o traz:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Manuten\xe7\xe3o mais f\xe1cil."}),"\n",(0,i.jsx)(a.li,{children:"Reuso de layouts e templates."}),"\n",(0,i.jsx)(a.li,{children:"Integra\xe7\xe3o f\xe1cil com mecanismos de HTML helpers, valida\xe7\xe3o, etc."}),"\n"]}),"\n",(0,i.jsxs)(a.h2,{id:"situa\xe7\xe3o-atual-do-controladorfabricante",children:["Situa\xe7\xe3o atual do ",(0,i.jsx)(a.code,{children:"ControladorFabricante"})]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Atualmente:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["Estamos ",(0,i.jsxs)(a.strong,{children:["carregando arquivos HTML manualmente com ",(0,i.jsx)(a.code,{children:"System.IO.File.ReadAllText"})]}),"."]}),"\n",(0,i.jsxs)(a.li,{children:["Fazemos substitui\xe7\xf5es com ",(0,i.jsx)(a.code,{children:"StringBuilder"})," para inserir dados no HTML."]}),"\n"]}),"\n",(0,i.jsx)(a.p,{children:(0,i.jsx)(a.strong,{children:"Desvantagens:"})}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsx)(a.li,{children:"Mistura l\xf3gica de neg\xf3cio com l\xf3gica de apresenta\xe7\xe3o."}),"\n",(0,i.jsx)(a.li,{children:"Dif\xedcil manuten\xe7\xe3o de HTML."}),"\n",(0,i.jsxs)(a.li,{children:["N\xe3o aproveita o motor de ",(0,i.jsx)(a.strong,{children:"Views"})," nativo do ASP.NET Core (",(0,i.jsx)(a.code,{children:"Razor"}),")."]}),"\n"]}),"\n",(0,i.jsx)(a.h2,{id:"utilizando-views-do-aspnet-mvc",children:"Utilizando Views do ASP.NET MVC"}),"\n",(0,i.jsx)(a.p,{children:"Iremos organizar as p\xe1ginas HTML do nosso projeto da seguinte maneira:"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-markdown",children:"/Views\n   /ControladorFabricante\n      Cadastrar.cshtml\n      Editar.cshtml\n      Excluir.cshtml\n      Visualizar.cshtml\n      Notificacao.cshtml\n   /Shared\n      Notificacao.cshtml\n      PaginaInicial.cshtml\t  \n"})}),"\n",(0,i.jsxs)(a.p,{children:["Note que tamb\xe9m iremos convert\xea-las para o formato de arquivo ",(0,i.jsx)(a.code,{children:".cshtml"}),", que nos permite inserir C# dinamicamente no c\xf3digo de marca\xe7\xe3o."]}),"\n",(0,i.jsx)(a.h3,{id:"pasta-compartilhada-shared",children:"Pasta Compartilhada (Shared)"}),"\n",(0,i.jsxs)(a.p,{children:["No ",(0,i.jsx)(a.strong,{children:"ASP.NET Core"}),", \xe9 totalmente poss\xedvel (e recomendado) ter ",(0,i.jsx)(a.strong,{children:"Views compartilhadas"})," para reaproveitar p\xe1ginas, partes de p\xe1gina, mensagens, etc."]}),"\n",(0,i.jsxs)(a.p,{children:["Por conven\xe7\xe3o do ASP.NET Core \u2014 coloque as ",(0,i.jsx)(a.strong,{children:"Views"})," compartilhadas em:"]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-md",children:"/Views/Shared/\n"})}),"\n",(0,i.jsx)(a.h3,{id:"refatora\xe7\xe3o-do-controller-com-views",children:"Refatora\xe7\xe3o do Controller com Views"}),"\n",(0,i.jsxs)(a.p,{children:["Agora, dentro do ",(0,i.jsx)(a.code,{children:"ControladorFabricante"}),", iremos substituir o c\xf3digo que manipula o HTML diretamente pelo retorno de ",(0,i.jsx)(a.code,{children:"View"})," apontando para a p\xe1gina adequada."]}),"\n",(0,i.jsx)(a.h4,{id:"passagem-de-dados-din\xe2micos-com-viewbag",children:"Passagem de dados din\xe2micos com ViewBag"}),"\n",(0,i.jsxs)(a.p,{children:["Em algumas p\xe1ginas, ser\xe1 necess\xe1rio a passagem de dados din\xe2micos para ",(0,i.jsx)(a.code,{children:"View"}),", nesse caso, podemos fazer uso do objeto din\xe2mico ",(0,i.jsx)(a.code,{children:"ViewBag"}),", que nos permite armazenar qualquer tipo de dado para recupera\xe7\xe3o na ",(0,i.jsx)(a.code,{children:"View"})," requisitada pelo contexto."]}),"\n",(0,i.jsxs)(a.p,{children:[(0,i.jsx)(a.code,{children:"ViewBag"})," \xe9 uma ",(0,i.jsx)(a.strong,{children:"forma din\xe2mica e simples de passar dados do Controller para a View"}),"."]}),"\n",(0,i.jsxs)(a.ul,{children:["\n",(0,i.jsxs)(a.li,{children:["\xc9 uma ",(0,i.jsx)(a.strong,{children:"propriedade din\xe2mica"})," dispon\xedvel dentro dos Controllers e das Views."]}),"\n",(0,i.jsxs)(a.li,{children:["Permite ",(0,i.jsx)(a.strong,{children:"armazenar qualquer tipo de dado"}),", sem necessidade de definir um modelo fortemente tipado."]}),"\n"]}),"\n",(0,i.jsx)(a.hr,{}),"\n",(0,i.jsx)(a.h4,{id:"cadastrar-fabricante",children:"Cadastrar Fabricante"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-cs",children:'[Route("fabricantes")]\npublic class ControladorFabricante : Controller\n{\n    [HttpGet("cadastrar")]\n    public IActionResult ExibirFormularioCadastroFabricante()\n    {\n        return View("Cadastrar");\n    }\n\n    [HttpPost("cadastrar")]\n    public IActionResult CadastrarFabricante([FromForm] string nome, [FromForm] string email, [FromForm] string telefone)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        Fabricante novoFabricante = new Fabricante(nome, email, telefone);\n\n        repositorioFabricante.CadastrarRegistro(novoFabricante);\n\n        ViewBag.Mensagem = $"O registro \\"{novoFabricante.Nome}\\" foi cadastrado com sucesso!";\n\n        return View("Notificacao");\n    }\n}\n'})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8" />\n    <title>Cadastro de Fabricante - Gest\xe3o de Equipamentos</title>\n</head>\n\n<body>\n    <h1>Gest\xe3o de Equipamentos</h1>\n\n    <hr />\n\n    <a href="/">P\xe1gina Inicial</a> /\n    <a href="/fabricantes/visualizar">Visualizar Fabricantes</a>\n\n    <hr />\n\n\n    <h3>Cadastro de Fabricante</h3>\n\n    <form action="/fabricantes/cadastrar" method="post">\n        <label>Nome do Fabricante:</label>\n        <br />\n        <input type="text" name="nome" />\n\n        <br />\n\n        <label>Email do Fabricante:</label>\n        <br />\n        <input type="text" name="email" />\n\n        <br />\n\n        <label>Telefone do Fabricante:</label>\n        <br />\n        <input type="text" name="telefone" />\n        <hr />\n\n        <button type="submit">Gravar</button>\n\n    </form>\n</body>\n</html>\n'})}),"\n",(0,i.jsx)(a.h4,{id:"editar-fabricante",children:"Editar Fabricante"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-cs",children:'[Route("fabricantes")]\npublic class ControladorFabricante : Controller\n{\n\t// ...\n    [HttpGet("editar/{id:int}")]\n    public IActionResult ExibirFormularioEdicaoFabricante(int id)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        Fabricante fabricanteSelecionado = repositorioFabricante.SelecionarRegistroPorId(id);\n\n        ViewBag.Fabricante = fabricanteSelecionado;\n\n        return View("Editar");\n    }\n\n    [HttpPost("editar/{id:int}")]\n    public IActionResult EditarFabricante(int id, [FromForm] string nome, [FromForm] string email, [FromForm] string telefone)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        Fabricante fabricanteAtualizado = new Fabricante(nome, email, telefone);\n\n        repositorioFabricante.EditarRegistro(id, fabricanteAtualizado);\n\n        ViewBag.Mensagem = $"O registro \\"{fabricanteAtualizado.Nome}\\" foi atualizado com sucesso!";\n\n        return View("Notificacao");\n    }\n}\n'})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-html",children:'@using GestaoDeEquipamentos.ConsoleApp.ModuloFabricante\n\n@{\n    Fabricante fabricanteSelecionado = (Fabricante)ViewBag.Fabricante;\n}\n\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8" />\n    <title>Edi\xe7\xe3o de Fabricante - Gest\xe3o de Equipamentos</title>\n</head>\n\n<body>\n    <h1>Gest\xe3o de Equipamentos</h1>\n\n    <hr />\n\n    <a href="/">P\xe1gina Inicial</a> /\n    <a href="/fabricantes/cadastrar">Cadastrar Novo Fabricante</a> /\n    <a href="/fabricantes/visualizar">Visualizar Fabricantes</a>\n\n    <hr />\n\n    <h3>Edi\xe7\xe3o de Fabricante</h3>\n\n    <form action="/fabricantes/editar/@fabricanteSelecionado.Id" method="post">\n        <label>Nome do Fabricante:</label>\n        <br />\n        <input type="text" name="nome" value="@fabricanteSelecionado.Nome" />\n\n        <br />\n\n        <label>Email do Fabricante:</label>\n        <br />\n        <input type="text" name="email" value="@fabricanteSelecionado.Email" />\n\n        <br />\n\n        <label>Telefone do Fabricante:</label>\n        <br />\n        <input type="text" name="telefone" value="@fabricanteSelecionado.Telefone" />\n        <hr />\n\n        <button type="submit">Gravar</button>\n    </form>\n</body>\n</html>\n'})}),"\n",(0,i.jsx)(a.h4,{id:"excluir-fabricante",children:"Excluir Fabricante"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-cs",children:'[Route("fabricantes")]\npublic class ControladorFabricante : Controller\n{\n    [HttpGet("cadastrar")]\n    public IActionResult ExibirFormularioCadastroFabricante()\n    {\n        return View("Cadastrar");\n    }\n\n    [HttpPost("cadastrar")]\n    public IActionResult CadastrarFabricante([FromForm] string nome, [FromForm] string email, [FromForm] string telefone)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        Fabricante novoFabricante = new Fabricante(nome, email, telefone);\n\n        repositorioFabricante.CadastrarRegistro(novoFabricante);\n\n        ViewBag.Mensagem = $"O registro \\"{novoFabricante.Nome}\\" foi cadastrado com sucesso!";\n\n        return View("Notificacao");\n    }\n\n    [HttpGet("editar/{id:int}")]\n    public IActionResult ExibirFormularioEdicaoFabricante(int id)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        Fabricante fabricanteSelecionado = repositorioFabricante.SelecionarRegistroPorId(id);\n\n        ViewBag.Fabricante = fabricanteSelecionado;\n\n        return View("Editar");\n    }\n\n    [HttpPost("editar/{id:int}")]\n    public IActionResult EditarFabricante(int id, [FromForm] string nome, [FromForm] string email, [FromForm] string telefone)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        Fabricante fabricanteAtualizado = new Fabricante(nome, email, telefone);\n\n        repositorioFabricante.EditarRegistro(id, fabricanteAtualizado);\n\n        ViewBag.Mensagem = $"O registro \\"{fabricanteAtualizado.Nome}\\" foi atualizado com sucesso!";\n\n        return View("Notificacao");\n    }\n\n    [HttpGet("excluir/{id:int}")]\n    public IActionResult ExibirFormularioExclusaoFabricante(int id)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        Fabricante fabricanteSelecionado = repositorioFabricante.SelecionarRegistroPorId(id);\n\n        ViewBag.Fabricante = fabricanteSelecionado;\n\n        return View("Editar");\n    }\n\n    [HttpPost("excluir/{id:int}")]\n    public IActionResult ExcluirFabricante(int id)\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        repositorioFabricante.ExcluirRegistro(id);\n\n        ViewBag.Mensagem = $"O registro foi exclu\xeddo com sucesso!";\n\n        return View("Notificacao");\n    }\n}\n'})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-html",children:'@using GestaoDeEquipamentos.ConsoleApp.ModuloFabricante\n@{\n\n    Fabricante fabricanteSelecionado = (Fabricante)ViewBag.Fabricante;\n}\n\n<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8" />\n    <title>Exclus\xe3o de Fabricante - Gest\xe3o de Equipamentos</title>\n</head>\n\n<body>\n    <h1>Gest\xe3o de Equipamentos</h1>\n\n    <hr />\n\n    <a href="/">P\xe1gina Inicial</a> /\n    <a href="/fabricantes/cadastrar">Cadastrar Novo Fabricante</a> /\n    <a href="/fabricantes/visualizar">Visualizar Fabricantes</a>\n\n    <hr />\n\n    <h3>Exclus\xe3o de Fabricante</h3>\n\n    <p>Voc\xea tem certeza que deseja excluir o registro "@fabricanteSelecionado.Nome"?</p>\n\n    <form action="/fabricantes/excluir/@fabricanteSelecionado.Id" method="post">\n        <button type="submit">Confirmar</button>\n        <a href="/fabricantes/visualizar">Voltar</a>\n    </form>\n</body>\n</html>\n'})}),"\n",(0,i.jsx)(a.h4,{id:"visualizar-fabricantes",children:"Visualizar Fabricantes"}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-cs",children:'[Route("fabricantes")]\npublic class ControladorFabricante : Controller\n{\n    [HttpGet("visualizar")]\n    public IActionResult VisualizarFabricantes()\n    {\n        ContextoDados contextoDados = new ContextoDados(true);\n        IRepositorioFabricante repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\n\n        List<Fabricante> fabricantes = repositorioFabricante.SelecionarRegistros();\n\n        ViewBag.Fabricantes = fabricantes;\n\n        return View("Visualizar");\n    }\n}\n'})}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-html",children:'@using GestaoDeEquipamentos.ConsoleApp.ModuloFabricante\n\n<!DOCTYPE html>\n<html>\n\x3c!--Cont\xe9m metadados (dados sobre os dados) da p\xe1gina HTML--\x3e\n<head>\n    <meta charset="utf-8" />\n    <title>Cadastro de Fabricante - Gest\xe3o de Equipamentos</title>\n</head>\n\n<body>\n    <h1>Gest\xe3o de Equipamentos</h1>\n\n    <hr />\n\n    <a href="/">P\xe1gina Inicial</a> /\n    <a href="/fabricantes/cadastrar">Cadastrar Novo Fabricante</a> /\n\n    <hr />\n\n    <h3>Visualiza\xe7\xe3o de Fabricantes</h3>\n\n    <ul>\n        @foreach (Fabricante f in ViewBag.Fabricantes)\n        {\n            <li>@f.ToString() / <a href="/fabricantes/editar/@f.Id">Editar</a> / <a href="/fabricantes/excluir/@f.Id">Excluir</a></li>\n        }\n    </ul>\n</body>\n</html>\n'})}),"\n",(0,i.jsx)(a.h4,{id:"notifica\xe7\xe3o",children:"Notifica\xe7\xe3o"}),"\n",(0,i.jsxs)(a.p,{children:["A View de Notifica\xe7\xe3o n\xe3o ter\xe1 um controlador espec\xedfico, por\xe9m ser\xe1 chamado por outros controladores que poder\xe3o passar uma mensagem espec\xedfica atrav\xe9s de ",(0,i.jsx)(a.code,{children:"ViewBag.Mensagem"}),"."]}),"\n",(0,i.jsx)(a.pre,{children:(0,i.jsx)(a.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n<head>\n    <meta charset="utf-8" />\n    <title>Notifica\xe7\xe3o - Gest\xe3o de Equipamentos</title>\n</head>\n\n<body>\n    <h1>Gest\xe3o de Equipamentos</h1>\n\n    <hr />\n\n    <a href="/">P\xe1gina Inicial</a> /\n\n    <hr />\n\n    <h3>Notifica\xe7\xe3o</h3>\n\n    <p>@ViewBag.Mensagem</p>\n</body>\n</html>\n'})})]})}function m(e={}){const{wrapper:a}={...(0,r.R)(),...e.components};return a?(0,i.jsx)(a,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,a,n)=>{n.d(a,{R:()=>t,x:()=>s});var o=n(6540);const i={},r=o.createContext(i);function t(e){const a=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),o.createElement(r.Provider,{value:a},e.children)}}}]);