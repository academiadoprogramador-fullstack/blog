"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1399],{3508:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>t});const o=JSON.parse('{"id":"Cronograma das Aulas/Semana 11/Aula 52/ViewModels do ASP.NET MVC","title":"ViewModels do ASP.NET MVC","description":"Introdu\xe7\xe3o","source":"@site/docs/Cronograma das Aulas/Semana 11/Aula 52/01. ViewModels do ASP.NET MVC.mdx","sourceDirName":"Cronograma das Aulas/Semana 11/Aula 52","slug":"/Cronograma das Aulas/Semana 11/Aula 52/ViewModels do ASP.NET MVC","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 52/ViewModels do ASP.NET MVC","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Views do ASP.NET MVC","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 51/Views do ASP.NET MVC"},"next":{"title":"M\xe9todos de Extens\xe3o do C-sharp","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 52/M\xe9todos de Extens\xe3o do C-sharp"}}');var s=n(4848),d=n(8453);const a={},i=void 0,l={},t=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"O que \xe9 um <strong>Model</strong>?",id:"o-que-\xe9-um-model",level:2},{value:"Caracter\xedsticas",id:"caracter\xedsticas",level:3},{value:"Exemplo",id:"exemplo",level:3},{value:"O que \xe9 um <strong>ViewModel</strong>?",id:"o-que-\xe9-um-viewmodel",level:2},{value:"Caracter\xedsticas",id:"caracter\xedsticas-1",level:3},{value:"Exemplo",id:"exemplo-1",level:3},{value:"Por que separar <strong>Model</strong> e <strong>ViewModel</strong>?",id:"por-que-separar-model-e-viewmodel",level:2},{value:"Exemplo pr\xe1tico no ASP.NET MVC",id:"exemplo-pr\xe1tico-no-aspnet-mvc",level:2}];function c(e){const r={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,s.jsxs)(r.p,{children:["Antes de falar de ",(0,s.jsx)(r.strong,{children:"Models"})," e ",(0,s.jsx)(r.strong,{children:"ViewModels"}),", \xe9 importante lembrar o que \xe9 ",(0,s.jsx)(r.strong,{children:"MVC"}),":"]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Componente"}),(0,s.jsx)(r.th,{children:"Responsabilidade"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Model"})}),(0,s.jsx)(r.td,{children:"Representa os dados e as regras de neg\xf3cio."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"View"})}),(0,s.jsx)(r.td,{children:"Exibe as informa\xe7\xf5es ao usu\xe1rio (interface)."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Controller"})}),(0,s.jsx)(r.td,{children:"Faz a ponte entre View e Model, processa requisi\xe7\xf5es."})]})]})]}),"\n",(0,s.jsxs)(r.h2,{id:"o-que-\xe9-um-model",children:["O que \xe9 um ",(0,s.jsx)(r.strong,{children:"Model"}),"?"]}),"\n",(0,s.jsxs)(r.p,{children:["Um ",(0,s.jsx)(r.strong,{children:"Model"})," \xe9 uma ",(0,s.jsx)(r.strong,{children:"classe que representa uma entidade do dom\xednio da aplica\xe7\xe3o"}),', ou seja, o "mundo real" que a aplica\xe7\xe3o est\xe1 modelando.']}),"\n",(0,s.jsx)(r.h3,{id:"caracter\xedsticas",children:"Caracter\xedsticas"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Representa tabelas do banco de dados."}),"\n",(0,s.jsx)(r.li,{children:"Cont\xe9m regras de neg\xf3cio ou valida\xe7\xe3o."}),"\n",(0,s.jsx)(r.li,{children:"Cont\xe9m apenas os dados essenciais (normalmente reflete a estrutura do banco de dados)."}),"\n",(0,s.jsxs)(r.li,{children:["Usado por ",(0,s.jsx)(r.strong,{children:"camadas de servi\xe7o, reposit\xf3rios e controllers"}),"."]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"exemplo",children:"Exemplo"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-cs",children:'public class Produto : EntidadeBase<Produto>\r\n{\r\n    public int Id { get; set; }\r\n    public string Nome { get; set; }\r\n    public decimal Preco { get; set; }\r\n\r\n    public List<string> Validar()\r\n    {\r\n        var erros = new List<string>();\r\n        \r\n        if (string.IsNullOrWhiteSpace(Nome))\r\n            erros.Add("Nome \xe9 obrigat\xf3rio.");\r\n            \r\n        if (Preco <= 0)\r\n            erros.Add("Pre\xe7o deve ser maior que zero.");\r\n            \r\n        return erros;\r\n    }\r\n}\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"o-que-\xe9-um-viewmodel",children:["O que \xe9 um ",(0,s.jsx)(r.strong,{children:"ViewModel"}),"?"]}),"\n",(0,s.jsxs)(r.p,{children:["Um ",(0,s.jsx)(r.strong,{children:"ViewModel"})," \xe9 uma ",(0,s.jsx)(r.strong,{children:"classe feita para servir a View (interface), adaptando ou combinando informa\xe7\xf5es dos Models"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"caracter\xedsticas-1",children:"Caracter\xedsticas"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"N\xe3o representa uma entidade do dom\xednio diretamente."}),"\n",(0,s.jsx)(r.li,{children:"Cont\xe9m apenas os dados que a tela realmente precisa."}),"\n",(0,s.jsx)(r.li,{children:"Pode combinar dados de m\xfaltiplos Models."}),"\n",(0,s.jsx)(r.li,{children:"Pode conter valida\xe7\xf5es de interface (DataAnnotations)."}),"\n",(0,s.jsx)(r.li,{children:"Ajuda a evitar expor diretamente o Model para a View (boa pr\xe1tica de seguran\xe7a e desacoplamento)."}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"exemplo-1",children:"Exemplo"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-cs",children:'public class ProdutoViewModel\r\n{\r\n    public string Nome { get; set; }\r\n\r\n    [Display(Name = "Pre\xe7o (R$)")]\r\n    [Range(0.01, double.MaxValue, ErrorMessage = "Pre\xe7o deve ser maior que zero.")]\r\n    public decimal Preco { get; set; }\r\n\r\n\t// dado adicional vindo de outra entidade, por exemplo.\r\n    public string NomeCategoria { get; set; } \r\n}\n'})}),"\n",(0,s.jsxs)(r.h2,{id:"por-que-separar-model-e-viewmodel",children:["Por que separar ",(0,s.jsx)(r.strong,{children:"Model"})," e ",(0,s.jsx)(r.strong,{children:"ViewModel"}),"?"]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Model"}),(0,s.jsx)(r.th,{children:"ViewModel"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Reflete a entidade do dom\xednio / banco"}),(0,s.jsx)(r.td,{children:"Reflete os dados necess\xe1rios para a View"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Cont\xe9m l\xf3gica de neg\xf3cio e valida\xe7\xe3o"}),(0,s.jsx)(r.td,{children:"Cont\xe9m valida\xe7\xe3o de interface (DataAnnotations)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Usado em camada de servi\xe7o, dom\xednio, reposit\xf3rio"}),(0,s.jsx)(r.td,{children:"Usado exclusivamente pela camada de interface (View)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Al\xe9m de:"}),(0,s.jsx)(r.td,{})]})]})]}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Seguran\xe7a"}),": evitar expor entidades completas na View."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Flexibilidade"}),": a View pode precisar de dados agregados, formatados ou simplificados."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Clareza"}),": cada classe tem uma \xfanica responsabilidade."]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"exemplo-pr\xe1tico-no-aspnet-mvc",children:"Exemplo pr\xe1tico no ASP.NET MVC"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-cs",children:"public class ProdutoController : Controller\r\n{\r\n    public IActionResult Detalhes(int id)\r\n    {\r\n        var produto = repositorioProduto.SelecionarPorId(id);\r\n\r\n        var viewModel = new ProdutoViewModel\r\n        {\r\n            Nome = produto.Nome,\r\n            Preco = produto.Preco,\r\n            CategoriaNome = produto.Categoria.Nome\r\n        };\r\n\r\n        return View(viewModel);\r\n    }\r\n}\n"})})]})}function u(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>i});var o=n(6540);const s={},d=o.createContext(s);function a(e){const r=o.useContext(d);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(d.Provider,{value:r},e.children)}}}]);