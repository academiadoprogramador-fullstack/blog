"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[6987],{8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>s});var o=n(6540);const a={},t=o.createContext(a);function i(e){const r=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(t.Provider,{value:r},e.children)}},9209:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"Cronograma das Aulas/Semana 11/Aula 54/Controlador de Equipamentos","title":"Controlador de Equipamentos","description":"Introdu\xe7\xe3o","source":"@site/docs/Cronograma das Aulas/Semana 11/Aula 54/03. Controlador de Equipamentos.mdx","sourceDirName":"Cronograma das Aulas/Semana 11/Aula 54","slug":"/Cronograma das Aulas/Semana 11/Aula 54/Controlador de Equipamentos","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 54/Controlador de Equipamentos","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"M\xe9todos de Extens\xe3o de Equipamentos","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 54/M\xe9todos de Extens\xe3o de Equipamentos"},"next":{"title":"ViewModels de Chamados","permalink":"/blog/docs/Cronograma das Aulas/Semana 11/Aula 55/ViewModels de Chamados"}}');var a=n(4848),t=n(8453);const i={},s=void 0,d={},l=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Actions e Views",id:"actions-e-views",level:2},{value:"01. Cadastro de Equipamento",id:"01-cadastro-de-equipamento",level:3},{value:"02. Edi\xe7\xe3o de Equipamento",id:"02-edi\xe7\xe3o-de-equipamento",level:3},{value:"03. Exclus\xe3o de Equipamento",id:"03-exclus\xe3o-de-equipamento",level:3},{value:"04. Visualiza\xe7\xe3o de Equipamentos",id:"04-visualiza\xe7\xe3o-de-equipamentos",level:3}];function u(e){const r={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,a.jsxs)(r.p,{children:["O ",(0,a.jsx)(r.code,{children:"ControladorEquipamento"})," ser\xe1 respons\xe1vel pelo gerenciamento de opera\xe7\xf5es CRUD de seu respectivo dom\xednio."]}),"\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"M\xe9todo"}),(0,a.jsx)(r.th,{children:"Verbo HTTP"}),(0,a.jsx)(r.th,{children:"Fun\xe7\xe3o"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"ExibirFormularioCadastroEquipamento"}),(0,a.jsx)(r.td,{children:"GET"}),(0,a.jsx)(r.td,{children:"Exibe formul\xe1rio de cadastro de equipamento"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"CadastrarEquipamento"}),(0,a.jsx)(r.td,{children:"POST"}),(0,a.jsx)(r.td,{children:"Processa o cadastro de novo equipamento"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"ExibirFormularioEdicaoEquipamento"}),(0,a.jsx)(r.td,{children:"GET"}),(0,a.jsx)(r.td,{children:"Exibe formul\xe1rio de edi\xe7\xe3o de equipamento"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"EditarEquipamento"}),(0,a.jsx)(r.td,{children:"POST"}),(0,a.jsx)(r.td,{children:"Processa a edi\xe7\xe3o de equipamento existente"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"ExibirFormularioExclusaoEquipamento"}),(0,a.jsx)(r.td,{children:"GET"}),(0,a.jsx)(r.td,{children:"Exibe tela de confirma\xe7\xe3o de exclus\xe3o de equipamento"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"ExcluirEquipamento"}),(0,a.jsx)(r.td,{children:"POST"}),(0,a.jsx)(r.td,{children:"Exclui o equipamento selecionado"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:"VisualizarEquipamentos"}),(0,a.jsx)(r.td,{children:"GET"}),(0,a.jsx)(r.td,{children:"Lista todos os equipamentos"})]})]})]}),"\n",(0,a.jsx)(r.h2,{id:"actions-e-views",children:"Actions e Views"}),"\n",(0,a.jsx)(r.h3,{id:"01-cadastro-de-equipamento",children:"01. Cadastro de Equipamento"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-cs",metastring:'title="Controllers/ControladorEquipamento.cs"',children:'[Route("equipamentos")]\r\npublic class ControladorEquipamento : Controller\r\n{\r\n    [HttpGet("cadastrar")]\r\n    public IActionResult ExibirFormularioCadastroEquipamento()\r\n    {\r\n        var contextoDados = new ContextoDados(true);\r\n        var repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\r\n\r\n        var fabricantes = repositorioFabricante.SelecionarRegistros();\r\n\r\n        var cadastrarVM = new CadastrarEquipamentoViewModel(fabricantes);\r\n\r\n        return View("Cadastrar", cadastrarVM);\r\n    }\r\n\r\n    [HttpPost("cadastrar")]\r\n    public IActionResult CadastrarEquipamento(CadastrarEquipamentoViewModel cadastrarVM)\r\n    {\r\n        var contextoDados = new ContextoDados(true);\r\n        var repositorioEquipamento = new RepositorioEquipamentoEmArquivo(contextoDados);\r\n        var repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\r\n\r\n        var fabricantes = repositorioFabricante.SelecionarRegistros();\r\n\r\n        var novoEquipamento = cadastrarVM.ParaEntidade(fabricantes);\r\n\r\n        repositorioEquipamento.CadastrarRegistro(novoEquipamento);\r\n\r\n        var notificacaoVM = new NotificacaoViewModel(\r\n            "Equipamento Cadastrado!",\r\n            $"O registro \\"{novoEquipamento.Nome}\\" foi cadastrado com sucesso!"\r\n        );\r\n\r\n        return View("Notificacao", notificacaoVM);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",metastring:'title="Views/ControladorEquipamento/Cadastrar.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models @model\r\nCadastrarEquipamentoViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset="utf-8" />\r\n    <title>Cadastro de Equipamento - Gest\xe3o de Equipamentos</title>\r\n  </head>\r\n\r\n  <body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/equipamentos/visualizar">Visualizar Equipamentos</a>\r\n\r\n    <hr />\r\n\r\n    <h3>Cadastro de Equipamento</h3>\r\n\r\n    <form action="/equipamentos/cadastrar" method="post">\r\n      <label for="Nome">Nome do Equipamento:</label>\r\n      <br />\r\n      <input type="text" name="Nome" id="Nome" />\r\n\r\n      <br />\r\n\r\n      <label for="PrecoAquisicao">Pre\xe7o de Aquisi\xe7\xe3o do Equipamento:</label>\r\n      <br />\r\n      <input type="text" name="PrecoAquisicao" id="PrecoAquisicao" />\r\n\r\n      <br />\r\n\r\n      <label for="DataFabricacao">Data de Fabrica\xe7\xe3o do Equipamento:</label>\r\n      <br />\r\n      <input type="date" name="DataFabricacao" id="DataFabricacao" />\r\n\r\n      <br />\r\n\r\n      <label for="FabricanteId">Fabricante do Equipamento:</label>\r\n      <br />\r\n      <select name="FabricanteId" id="FabricanteId">\r\n        @foreach (var f in @Model.FabricantesDisponiveis) {\r\n        <option value="@f.Id">@f.Nome</option>\r\n        }\r\n      </select>\r\n\r\n      <hr />\r\n\r\n      <button type="submit">Gravar</button>\r\n    </form>\r\n  </body>\r\n</html>\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"02-edi\xe7\xe3o-de-equipamento",children:"02. Edi\xe7\xe3o de Equipamento"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-cs",metastring:'title="Controllers/ControladorEquipamento.cs"',children:'[Route("equipamentos")]\r\npublic class ControladorEquipamento : Controller\r\n{\r\n    [HttpGet("editar/{id:int}")]\r\n    public IActionResult ExibirFormularioEdicaoEquipamento([FromRoute] int id)\r\n    {\r\n        var contextoDados = new ContextoDados(true);\r\n        var repositorioEquipamento = new RepositorioEquipamentoEmArquivo(contextoDados);\r\n        var repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\r\n\r\n        var fabricantes = repositorioFabricante.SelecionarRegistros();\r\n\r\n        var equipamentoSelecionado = repositorioEquipamento.SelecionarRegistroPorId(id);\r\n\r\n        var editarVM = new EditarEquipamentoViewModel(\r\n            id,\r\n            equipamentoSelecionado.Nome,\r\n            equipamentoSelecionado.PrecoAquisicao,\r\n            equipamentoSelecionado.DataFabricacao,\r\n            equipamentoSelecionado.Fabricante.Id,\r\n            fabricantes\r\n        );\r\n\r\n        return View("Editar", editarVM);\r\n    }\r\n\r\n    [HttpPost("editar/{id:int}")]\r\n    public IActionResult EditarEquipamento([FromRoute] int id, EditarEquipamentoViewModel editarVM)\r\n    {\r\n        var contextoDados = new ContextoDados(true);\r\n        var repositorioEquipamento = new RepositorioEquipamentoEmArquivo(contextoDados);\r\n        var repositorioFabricante = new RepositorioFabricanteEmArquivo(contextoDados);\r\n\r\n        var fabricantes = repositorioFabricante.SelecionarRegistros();\r\n\r\n        var equipamentoOriginal = repositorioEquipamento.SelecionarRegistroPorId(id);\r\n\r\n        var equipamentoEditado = editarVM.ParaEntidade(fabricantes);\r\n\r\n        if (equipamentoEditado.Fabricante != equipamentoOriginal.Fabricante)\r\n        {\r\n            equipamentoOriginal.Fabricante.RemoverEquipamento(equipamentoOriginal);\r\n            equipamentoOriginal.Fabricante = equipamentoEditado.Fabricante;\r\n        }\r\n\r\n        repositorioEquipamento.EditarRegistro(id, equipamentoEditado);\r\n\r\n        var notificacaoVM = new NotificacaoViewModel(\r\n            "Equipamento Editado!",\r\n            $"O registro \\"{equipamentoEditado.Nome}\\" foi editado com sucesso!"\r\n        );\r\n\r\n        return View("Notificacao", notificacaoVM);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",metastring:'title="Views/ControladorEquipamento/Editar.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models\r\n\r\n@model EditarEquipamentoViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <meta charset="utf-8" />\r\n    <title>Edi\xe7\xe3o de Equipamento - Gest\xe3o de Equipamentos</title>\r\n</head>\r\n\r\n<body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/equipamentos/cadastrar">Cadastrar Novo Equipamento</a> /\r\n    <a href="/equipamentos/visualizar">Visualizar Equipamentos</a>\r\n\r\n    <hr />\r\n\r\n    <h3>Edi\xe7\xe3o de Equipamento</h3>\r\n\r\n    <form action="/equipamentos/editar/@Model.Id" method="post">\r\n        <label for="Nome">Nome do Equipamento:</label>\r\n        <br />\r\n        <input type="text" name="Nome" id="Nome" value="@Model.Nome"/>\r\n\r\n        <br />\r\n\r\n        <label for="PrecoAquisicao">Pre\xe7o de Aquisi\xe7\xe3o do Equipamento:</label>\r\n        <br />\r\n        <input type="text" name="PrecoAquisicao" id="PrecoAquisicao" value="@Model.PrecoAquisicao.ToString("N2")"/>\r\n\r\n        <br />\r\n\r\n        <label for="DataFabricacao">Data de Fabrica\xe7\xe3o do Equipamento:</label>\r\n        <br />\r\n        <input type="date" name="DataFabricacao" id="DataFabricacao" value="@Model.DataFabricacao.ToString("yyyy-MM-dd")"/>\r\n\r\n        <br />\r\n\r\n        <label for="FabricanteId">Fabricante do Equipamento:</label>\r\n        <br />\r\n        <select name="FabricanteId" id="FabricanteId">\r\n            @foreach (var f in @Model.FabricantesDisponiveis)\r\n            {\r\n                <option value="@f.Id" @(f.Id == Model.FabricanteId ? "selected" : "")>@f.Nome</option>\r\n            }\r\n        </select>\r\n\r\n        <hr />\r\n\r\n        <button type="submit">Gravar</button>\r\n    </form>\r\n</body>\r\n</html>\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"03-exclus\xe3o-de-equipamento",children:"03. Exclus\xe3o de Equipamento"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-cs",metastring:'title="Controllers/ControladorEquipamento.cs"',children:'[Route("equipamentos")]\r\npublic class ControladorEquipamento : Controller\r\n{\r\n    [HttpGet("excluir/{id:int}")]\r\n    public IActionResult ExibirFormularioExclusaoEquipamento([FromRoute] int id)\r\n    {\r\n        var contextoDados = new ContextoDados(true);\r\n        var repositorioEquipamento = new RepositorioEquipamentoEmArquivo(contextoDados);\r\n\r\n        var equipamentoSelecionado = repositorioEquipamento.SelecionarRegistroPorId(id);\r\n\r\n        var excluirVM = new ExcluirEquipamentoViewModel(\r\n            equipamentoSelecionado.Id,\r\n            equipamentoSelecionado.Nome\r\n        );\r\n\r\n        return View("Excluir", excluirVM);\r\n    }\r\n\r\n    [HttpPost("excluir/{id:int}")]\r\n    public IActionResult ExcluirEquipamento([FromRoute] int id)\r\n    {\r\n        var contextoDados = new ContextoDados(true);\r\n        var repositorioEquipamento = new RepositorioEquipamentoEmArquivo(contextoDados);\r\n\r\n        repositorioEquipamento.ExcluirRegistro(id);\r\n\r\n        var notificacaoVM = new NotificacaoViewModel(\r\n            "Equipamento Exclu\xeddo!",\r\n            "O registro foi exclu\xeddo com sucesso!"\r\n        );\r\n\r\n        return View("Notificacao", notificacaoVM);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",metastring:'title="Views/ControladorEquipamento/Excluir.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models @model\r\nExcluirEquipamentoViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset="utf-8" />\r\n    <title>Exclus\xe3o de Equipamento - Gest\xe3o de Equipamentos</title>\r\n  </head>\r\n\r\n  <body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/equipamentos/cadastrar">Cadastrar Novo Equipamento</a> /\r\n    <a href="/equipamentos/visualizar">Visualizar Equipamentos</a>\r\n\r\n    <hr />\r\n\r\n    <h3>Exclus\xe3o de Equipamento</h3>\r\n\r\n    <p>Voc\xea tem certeza que deseja excluir o registro "@Model.Nome"?</p>\r\n\r\n    <form action="/equipamentos/excluir/@Model.Id" method="post">\r\n      <button type="submit">Confirmar</button>\r\n      <a href="/equipamentos/visualizar">Voltar</a>\r\n    </form>\r\n  </body>\r\n</html>\n'})}),"\n",(0,a.jsx)(r.hr,{}),"\n",(0,a.jsx)(r.h3,{id:"04-visualiza\xe7\xe3o-de-equipamentos",children:"04. Visualiza\xe7\xe3o de Equipamentos"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-cs",metastring:'title="Controllers/ControladorEquipamento.cs"',children:'[Route("equipamentos")]\r\npublic class ControladorEquipamento : Controller\r\n{\r\n    [HttpGet("visualizar")]\r\n    public IActionResult VisualizarEquipamentos()\r\n    {\r\n        var contextoDados = new ContextoDados(true);\r\n        var repositorioEquipamento = new RepositorioEquipamentoEmArquivo(contextoDados);\r\n\r\n        var equipamentos = repositorioEquipamento.SelecionarRegistros();\r\n\r\n        var visualizarVM = new VisualizarEquipamentosViewModel(equipamentos);\r\n\r\n        return View("Visualizar", visualizarVM);\r\n    }\r\n}\n'})}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-html",metastring:'title="Views/ControladorEquipamento/Visualizar.cshtml"',children:'@using GestaoDeEquipamentos.ConsoleApp.Models @model\r\nVisualizarEquipamentosViewModel;\r\n\r\n<!DOCTYPE html>\r\n<html>\r\n  <head>\r\n    <meta charset="utf-8" />\r\n    <title>Visualiza\xe7\xe3o de Equipamentos - Gest\xe3o de Equipamentos</title>\r\n  </head>\r\n\r\n  <body>\r\n    <h1>Gest\xe3o de Equipamentos</h1>\r\n\r\n    <hr />\r\n\r\n    <a href="/">P\xe1gina Inicial</a> /\r\n    <a href="/equipamentos/cadastrar">Cadastrar Novo Equipamento</a> /\r\n\r\n    <hr />\r\n\r\n    <h3>Visualiza\xe7\xe3o de Equipamentos</h3>\r\n\r\n    <ul>\r\n      @foreach (DetalhesEquipamentoViewModel e in Model.Registros) {\r\n      <li>\r\n        @e.ToString() / <a href="/equipamentos/editar/@e.Id">Editar</a> /\r\n        <a href="/equipamentos/excluir/@e.Id">Excluir</a>\r\n      </li>\r\n      }\r\n    </ul>\r\n  </body>\r\n</html>\n'})})]})}function c(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}}}]);